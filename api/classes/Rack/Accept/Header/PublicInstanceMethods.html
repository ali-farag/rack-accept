<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Rack::Accept::Header::PublicInstanceMethods [Rack::Accept API Documentation]</title>
    <meta content='text/html; charset=utf8' http-equiv='Content-Type'>
    <link href='../../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Rack::Accept::Header::PublicInstanceMethods
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../../files/lib/rack/accept/header_rb.html">lib/rack/accept/header.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000008">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000013">accept?</a></li>
              <li><a href="#M000016">best_of</a></li>
              <li><a href="#M000009">name</a></li>
              <li><a href="#M000010">qvalue</a></li>
              <li><a href="#M000015">sort</a></li>
              <li><a href="#M000014">sort_with_qvalues</a></li>
              <li><a href="#M000017">to_s</a></li>
              <li><a href="#M000011">value</a></li>
              <li><a href="#M000012">values</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>qvalues</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      A table of all values of this header to their respective quality factors
                      (qvalues).
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000008'>
                <a name='M000008'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(header='')</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 69</span>&#x000A;69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">header</span>=<span class="ruby-value str">''</span>)&#x000A;70:         <span class="ruby-ivar">@qvalues</span> = <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">header</span>)&#x000A;71:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000013'>
                <a name='M000013'></a>
                <div class='synopsis'>
                  <span class='name'>accept?</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Determines if the given <tt>value</tt> is acceptable (does not have a
                  qvalue of 0) according to this header.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000013-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000013-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 97</span>&#x000A;97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept?</span>(<span class="ruby-identifier">value</span>)&#x000A;98:         <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>&#x000A;99:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000016'>
                <a name='M000016'></a>
                <div class='synopsis'>
                  <span class='name'>best_of</span>
                  <span class='arguments'>(values, keep_unacceptables=false)</span>
                </div>
                <div class='description'>
                  <p>
                  A shortcut for retrieving the first result of <a
                  href="PublicInstanceMethods.html#M000015">sort</a>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000016-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000016-source'>     <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 135</span>&#x000A;135:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">best_of</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>=<span class="ruby-keyword kw">false</span>)&#x000A;136:         <span class="ruby-identifier">sort</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>).<span class="ruby-identifier">first</span>&#x000A;137:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000009'>
                <a name='M000009'></a>
                <div class='synopsis'>
                  <span class='name'>name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The name of this header. Should be overridden in classes that mixin this
                  module.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000009-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000009-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 75</span>&#x000A;75:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name</span>&#x000A;76:         <span class="ruby-value str">''</span>&#x000A;77:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000010'>
                <a name='M000010'></a>
                <div class='synopsis'>
                  <span class='name'>qvalue</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the quality factor (qvalue) of the given <tt>value</tt>. Should be
                  overridden in classes that mixin this module.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000010-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000010-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 81</span>&#x000A;81:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">value</span>)&#x000A;82:         <span class="ruby-value">1</span>&#x000A;83:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000015'>
                <a name='M000015'></a>
                <div class='synopsis'>
                  <span class='name'>sort</span>
                  <span class='arguments'>(values, keep_unacceptables=false)</span>
                </div>
                <div class='description'>
                  <p>
                  Sorts the given <tt>values</tt> according to the qvalue of each while
                  preserving the original order. See <a
                  href="PublicInstanceMethods.html#M000014">sort_with_qvalues</a> for more
                  information on exactly how the sort is performed.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000015-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000015-source'>     <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 130</span>&#x000A;130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sort</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>=<span class="ruby-keyword kw">false</span>)&#x000A;131:         <span class="ruby-identifier">sort_with_qvalues</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">q</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> }&#x000A;132:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000014'>
                <a name='M000014'></a>
                <div class='synopsis'>
                  <span class='name'>sort_with_qvalues</span>
                  <span class='arguments'>(values, keep_unacceptables=true)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a copy of the given <tt>values</tt> array, sorted by quality factor
                  (qvalue). Each element of the returned array is itself an array containing
                  two objects: 1) the value&#8217;s qvalue and 2) the original value.
                  </p>
                  <p>
                  It is important to note that this sort is a &#8220;stable sort&#8221;. In
                  other words, the order of the original values is preserved so long as the
                  qvalue for each is the same. This expectation can be useful when trying to
                  determine which of a variety of options has the highest qvalue. If the user
                  prefers using one option over another (for any number of reasons), he
                  should put it first in <tt>values</tt>. He may then use the first result
                  with confidence that it is both most acceptable to the client and most
                  convenient for him as well.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000014-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000014-source'>     <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 114</span>&#x000A;114:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sort_with_qvalues</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>=<span class="ruby-keyword kw">true</span>)&#x000A;115:         <span class="ruby-identifier">qvalues</span> = {}&#x000A;116:         <span class="ruby-identifier">values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>&#x000A;117:           <span class="ruby-identifier">q</span> = <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">v</span>)&#x000A;118:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">q</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">keep_unacceptables</span>&#x000A;119:             <span class="ruby-identifier">qvalues</span>[<span class="ruby-identifier">q</span>] <span class="ruby-operator">||=</span> []&#x000A;120:             <span class="ruby-identifier">qvalues</span>[<span class="ruby-identifier">q</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>&#x000A;121:           <span class="ruby-keyword kw">end</span>&#x000A;122:         <span class="ruby-keyword kw">end</span>&#x000A;123:         <span class="ruby-identifier">order</span> = <span class="ruby-identifier">qvalues</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">reverse</span>&#x000A;124:         <span class="ruby-identifier">order</span>.<span class="ruby-identifier">inject</span>([]) {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span>, <span class="ruby-identifier">q</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">qvalues</span>[<span class="ruby-identifier">q</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">q</span>, <span class="ruby-identifier">v</span>] }) }&#x000A;125:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000017'>
                <a name='M000017'></a>
                <div class='synopsis'>
                  <span class='name'>to_s</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a string representation of this header.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000017-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000017-source'>     <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 140</span>&#x000A;140:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>&#x000A;141:         [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">': '</span>)&#x000A;142:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000011'>
                <a name='M000011'></a>
                <div class='synopsis'>
                  <span class='name'>value</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the value of this header as a string.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000011-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000011-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 86</span>&#x000A;86:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">value</span>&#x000A;87:         <span class="ruby-identifier">join</span>(<span class="ruby-ivar">@qvalues</span>)&#x000A;88:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000012'>
                <a name='M000012'></a>
                <div class='synopsis'>
                  <span class='name'>values</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns an array of all values of this header, in no particular order.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000012-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000012-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 91</span>&#x000A;91:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">values</span>&#x000A;92:         <span class="ruby-ivar">@qvalues</span>.<span class="ruby-identifier">keys</span>&#x000A;93:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
